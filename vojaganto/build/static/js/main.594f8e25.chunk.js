(this["webpackJsonpvojaganto-app"]=this["webpackJsonpvojaganto-app"]||[]).push([[0],Array(35).concat([function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABCUlEQVRIie2UvUoDURSE56RJZaOg4CadWqS2zBMIVvoq+iJ5irBYGUWsLW1Mq53EyoCmVPCzcJRFsz/ITbcDh4W5c2Z277l7pRYpAPSAHFi4zoDdlOZz/mIOZCkCchueA5lrYm6cImBhs6zA9c291PV3mmT4Gf99yWr3r4Hibem5LszlKQL2gOeSIe8k+AbJgx0Dr648mXmL0qMHdCTtSzqQNJS0Lanv5UdJT5JuJF1Kuo2Ij0aJQBc4BWZLTk4ZZsAJ0K0z3wKmhcYHYAQcAgNgzTUwN7LmG3fAZlXAtYX3wBFQ+/cCARy7B+CqSvxu0Xqd8ZLeDfe+Ffn4JUIJEBE/vk0uuxarxSe6SXpYzUyecQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA7klEQVRIie3TMS5EURTG8blippFoJNQKumlYARVbmE1IptHagj1Yg4p2FGxAQUWiJDRT8NOcxM2Lca/nTSF8yW3O/b7/yXnv3F7vTwljjOcBTjjyoWMsdAUf4CTA0ziiNvgpfAmnAXzGHnbwGLVzLLeFr+AiQA/Yyu6GuIu7K6x9F76O6wDcYKPgucVmLXyI+wheYrUw5SSbcrsE38VTBM5qvm/jP71gf5ZxlG0I9EvwLNvPclOMmoYDvGYmtfCMkesNh18a2zZo1hdrw5/VU0qplO3muXfVIIXm1qCNfn+DmVtUs6o1nrlP8K+i3gEPe1OF6G2zpAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABlklEQVRoge2ZMUsDMRiG3xOhaBUUHAQX1xZB/BlOBcFJkE5dBBf/jKO/wM1NnRVE3Dq4KP4Ei4PL49Ag6eGl1zsSvyEPlJD7muR92vQOGilji2LeG4COpJGkE0l7krqxQ4UoiuLPzMuhQcCOpBtJ+zFCJQHoAC9MGQMDYD3iegA0rYcmPvckNlqlrLdeNJFHN3bQKmH99aKJfLqx0bZTab1oIs0GNqStyFKcWOnJItbIItbIItbIItbIItbIItbIItbIItbIItbIItbIItbIItbIItYIHvRIErAm6UzSsaSepNWYgZr+31x59OZN+CZpt8nkMag6equEWR6AQ2ArUr54eBK3wNwtaBZPpBeqzxsfL2FNgG+XpVNRNyUSuv2+u/YgRZC2hESuXXsJrKQIEwVgE/hwO2QMHAHbXt3U1goC9IBX/z7s1X77QB94cq9+ue7329JGpgtcMD13n/wRbAhMvP7EXUsqsthTclawPOmVa4czCyz6JE6N9yF9ASPv+qn/Df1nxloA98Az7jdRqvVd7S5Vnh8A5lk64ewAzwAAAABJRU5ErkJggg=="},,function(e,t,a){e.exports=a(91)},,,,,,function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),i=a(1),o=a.n(i),u=a(3),l=a(4),p=a(5),m=a(7),d=a(6),h=a(10),f=a(13),g=(a(45),a(22));function b(e,t){var a=t.target,n=a.value,r=a.name;e.setState(Object(g.a)({},r,n))}function v(){window.location.reload(!1)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;t?window.open(e,"_blank"):document.location.href=e}var E=function(e){return e?new Date(e).toISOString().split("T")[0]:""},j=function(e){return e?e.url:"https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fspecials-images.forbesimg.com%2Fdam%2Fimageserve%2F1171238184%2F960x0.jpg%3Ffit%3Dscale"},w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this.props.posting;return r.a.createElement(h.b,{to:"/trip/"+String(t._id)},r.a.createElement("div",{className:"posting-card"},r.a.createElement("div",{className:"posting-info-container"},r.a.createElement("h3",{className:"posting-info posting-title"},t.title),r.a.createElement("div",{className:"posting-info posting-date"},E(t.date))),r.a.createElement("img",{className:"posting-cover",src:(e=t.images[0],e?e.url:"https://merriam-webster.com/assets/mw/images/article/art-wap-article-main/gray-background-7131-98db5e6ffc4972baa4087760291cbc3e@1x.jpg"),alt:""})))}}]),a}(r.a.Component),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={postingCardColumn:n.props.postingCardColumn},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"posting-card-column-page"},this.state.postingCardColumn.postings.map((function(e,t){return r.a.createElement(w,{key:t,posting:e})})))}}]),a}(r.a.Component),O=(a(54),"http://127.0.0.1:5000");function N(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(o.a.mark((function e(t){var a,n,r,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=new URL(O+t),Object.keys(a).forEach((function(e){return n.searchParams.append(e,a[e])})),e.next=5,fetch(n,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});case 5:return r=e.sent,e.t0=r,e.next=9,r.json();case 9:return e.t1=e.sent,e.abrupt("return",{response:e.t0,body:e.t1});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(o.a.mark((function e(t){var a,n,r,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=new URL(O+t),e.prev=2,e.next=5,fetch(n,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.t0=r,e.next=9,r.json();case 9:return e.t1=e.sent,e.abrupt("return",{response:e.t0,body:e.t1});case 13:throw e.prev=13,e.t2=e.catch(2),e.t2;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function A(e){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t){var a,n,r,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=new URL(O+t),e.next=4,fetch(n,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return r=e.sent,e.t0=r,e.next=8,r.json();case 8:return e.t1=e.sent,e.abrupt("return",{response:e.t0,body:e.t1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(o.a.mark((function e(t){var a,n,r,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{},n=new URL(O+t),e.next=4,fetch(n,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return r=e.sent,e.t0=r,e.next=8,r.json();case 8:return e.t1=e.sent,e.abrupt("return",{response:e.t0,body:e.t1});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/api/user/login",{username:t,password:a});case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function _(e,t){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/api/user/login",{username:t,password:a});case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function J(e,t,a){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(o.a.mark((function e(t,a,n){var r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/api/user",{username:t,password:a,name:n});case 3:if(r=e.sent,s=r.response,c=r.body,200!==s.status){e.next=10;break}return e.abrupt("return",c);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function F(){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("/api/user/logout");case 3:if(t=e.sent,200!==t.response.status){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function B(){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/user/session/resume");case 3:if(t=e.sent,a=t.response,n=t.body,200!==a.status){e.next=11;break}return console.log("Resuming session",a),e.abrupt("return",n);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function G(e,t){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length<1||a.length<1)){e.next=4;break}return alert("Please enter username and password"),e.abrupt("return",null);case 4:return e.next=6,M(t,a);case 6:if(n=e.sent){e.next=12;break}return alert("Invalid Credentials"),e.abrupt("return",null);case 12:return e.abrupt("return",n);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0)),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function Q(e,t){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length<1||a.length<1)){e.next=4;break}return alert("Please enter username and password"),e.abrupt("return",null);case 4:return e.next=6,_(t,a);case 6:if(n=e.sent){e.next=12;break}return alert("Invalid Credentials"),e.abrupt("return",null);case 12:if("admin"===n.role){e.next=17;break}return alert("Permission denied"),e.abrupt("return",null);case 17:if("admin"!==n.role){e.next=19;break}return e.abrupt("return",n);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0)),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function Y(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length<1||a.length<1)){e.next=4;break}return alert("Please enter username and password"),e.abrupt("return",null);case 4:return e.next=6,J(t,a,n);case 6:if(r=e.sent){e.next=12;break}return alert("Username already exists"),e.abrupt("return",null);case 12:return e.abrupt("return",r);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0)),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function K(){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:if(t=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",t);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function H(){return(H=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:return e.abrupt("return",null);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0)),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var X=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setWarningMessage=function(e){n.setState({warningMessage:e})},n.submitRegister=Object(u.a)(o.a.mark((function e(){var t,a,r,s,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,t.handleCloseModal,a=t.handleCloseRegisterModal,r=n.state.usernameInput,s=n.state.passwordInput,c=n.state.confirmInput,i=n.state.nameInput,c===s){e.next=8;break}return n.setWarningMessage("Password does not match!"),e.abrupt("return");case 8:if(!(r.length<1||s.length<1||i.length<1)){e.next=11;break}return n.setWarningMessage("Fields cannot be empty!"),e.abrupt("return");case 11:return e.next=13,Y(r,s,i);case 13:(u=e.sent)?(alert("Successfully registered ".concat(u.username,"! You can login now.")),a()):n.setWarningMessage("User already exists!");case 15:case"end":return e.stop()}}),e)}))),n.state={usernameInput:"",passwordInput:"",confirmInput:"",nameInput:"",warningMessage:void 0},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return this.props.registerModalDisplay?r.a.createElement("div",{className:"user-register-modal"},r.a.createElement("form",{className:"user-register-form"},r.a.createElement("h2",{className:"register-title"},"Register"),r.a.createElement("div",{className:"user-register-input"},r.a.createElement("span",null,"Username"),r.a.createElement("input",{value:this.state.usernameInput,onChange:function(t){return b(e,t)},type:"text",name:"usernameInput",placeholder:"Username"})),r.a.createElement("div",{className:"user-register-input"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{value:this.state.passwordInput,onChange:function(t){return b(e,t)},type:"password",name:"passwordInput",placeholder:"Password"})),r.a.createElement("div",{className:"user-register-input"},r.a.createElement("span",null,"Confirm password"),r.a.createElement("input",{value:this.state.confirmInput,onChange:function(t){return b(e,t)},type:"password",name:"confirmInput",placeholder:"Confirm Password"})),r.a.createElement("div",{className:"user-register-input"},r.a.createElement("span",null,"Nickname"),r.a.createElement("input",{value:this.state.nameInput,onChange:function(t){return b(e,t)},type:"text",name:"nameInput",placeholder:"Name"})),this.state.warningMessage?r.a.createElement("div",{className:"user-register-warning"},this.state.warningMessage):null,r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"register-submit-button",onClick:this.props.handleCloseRegisterModal},"Cancel"),r.a.createElement("button",{type:"button",className:"register-submit-button",onClick:this.submitRegister},"Register")))):null}}]),a}(r.a.Component),$=(a(55),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(g.a)({},r,a))},n.setWarningMessage=function(e){n.setState({warningMessage:e})},n.submitLogin=Object(u.a)(o.a.mark((function e(){var t,a,r,s,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.setCurrUser,r=t.handleCloseModal,s=n.state.usernameInput,c=n.state.passwordInput,e.next=5,G(s,c);case 5:(i=e.sent)?(a(i),r()):n.setWarningMessage("Login Failed");case 7:case"end":return e.stop()}}),e)}))),n.handleOpenRegisterModal=function(){n.setState({registerModalDisplay:!0})},n.handleCloseRegisterModal=function(){n.setState({registerModalDisplay:!1})},n.state={usernameInput:"",passwordInput:"",warningMessage:void 0,registerModalDisplay:!1},n}return Object(p.a)(a,[{key:"render",value:function(){return this.props.loginModalDisplay?r.a.createElement("div",{className:"user-login-modal"},r.a.createElement("form",{className:"user-login-form"},r.a.createElement("h2",{className:"login-title"},"Login"),r.a.createElement("div",{className:"user-login-input"},r.a.createElement("span",null,"Username"),r.a.createElement("input",{value:this.state.usernameInput,onChange:this.handleInputChange,type:"text",name:"usernameInput",placeholder:"Username"})),r.a.createElement("div",{className:"user-login-input"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{value:this.state.passwordInput,onChange:this.handleInputChange,type:"password",name:"passwordInput",placeholder:"Password"})),r.a.createElement("div",{className:"register-message"},r.a.createElement("u",{className:"message",onClick:this.handleOpenRegisterModal},"Click here to register"),r.a.createElement(X,{registerModalDisplay:this.state.registerModalDisplay,handleCloseModal:this.props.handleCloseModal,handleCloseRegisterModal:this.handleCloseRegisterModal})),this.state.warningMessage?r.a.createElement("div",{className:"user-login-warning"},this.state.warningMessage):null,r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"login-submit-button",onClick:this.props.handleCloseModal},"Cancel"),r.a.createElement("button",{type:"button",className:"login-submit-button",onClick:this.submitLogin},"Login")))):null}}]),a}(r.a.Component)),ee=(a(56),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleOpenModal=function(){n.setState({loginModalDisplay:!0})},n.handleCloseModal=function(){n.setState({loginModalDisplay:!1})},n.logoutUser=function(){n.props.setCurrUser(null),function(){H.apply(this,arguments)}()},n.state={loginModalDisplay:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.setCurrUser;return t?r.a.createElement("div",{className:"login"},r.a.createElement("button",{type:"button",className:"login-button",onClick:this.logoutUser},"LOGOUT")):r.a.createElement("div",{className:"login"},r.a.createElement("button",{className:"login-button",onClick:this.handleOpenModal},"LOGIN | REGISTER"),r.a.createElement($,{loginModalDisplay:this.state.loginModalDisplay,handleCloseModal:this.handleCloseModal,currUser:t,setCurrUser:a}))}}]),a}(r.a.Component));a(57);function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/posting",t);case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/posting/".concat(t));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Posting ",t),e.next=4,C("/api/posting",t);case 4:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=11;break}return e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function ie(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("/api/posting/".concat(t),a);case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/api/posting/".concat(t));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/user/".concat(t,"/journey"));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function de(e){return he.apply(this,arguments)}function he(){return(he=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/journey/".concat(t));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=11;break}return console.log("journey",r),e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function fe(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("/api/user/".concat(String(t),"/journey"),a);case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function be(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("/api/journey/".concat(String(t)),a);case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ye(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/api/journey/".concat(String(t)));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function je(e){return we.apply(this,arguments)}function we(){return(we=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/user/".concat(t,"/posting"));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ke(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Searching for",a),e.next=4,te({search:a});case 4:(n=e.sent)&&(console.log(n),r=[{postings:[]},{postings:[]},{postings:[]}],n.forEach((function(e,t){r[t%3].postings.push(e)})),t.setState({postingCardColumns:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Ne=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currUser,n=t.setCurrUser,s=t.postingCardColumns,c=t.setSearch;return r.a.createElement("div",{className:"home-view"},r.a.createElement("div",{className:"web-header"},r.a.createElement("h1",{className:"web-title"},"Voja\u011danto"),r.a.createElement("div",{className:"home-search"},r.a.createElement("input",{type:"text",className:"home-search-input",name:"search",placeholder:"Search for trips!",onChange:function(t){return b(e,t)}}),r.a.createElement("button",{className:"home-search-btn",onClick:function(){return c(e.state.search)}},"Search")),r.a.createElement(ee,{currUser:a,setCurrUser:n})),r.a.createElement("div",{className:"posting-card-columns"},s.map((function(e,t){return r.a.createElement(k,{key:t,postingCardColumn:e})}))))}}]),a}(r.a.Component),xe=(a(58),a(34)),Ce=a.n(xe),Ue=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.currUser;return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-main"},r.a.createElement(h.b,{className:"nav-item",to:"/"},"HOME"),e?r.a.createElement(h.b,{className:"nav-item",to:"/profile/".concat(String(e._id))},"PROFILE"):null),e?r.a.createElement("div",{className:"navbar-edit"},r.a.createElement(h.b,{className:"nav-item to-edit",to:"/new-posting"},r.a.createElement(Ce.a,null))):null)}}]),a}(r.a.Component),Ae=a(105),Se=a(106),Ie=a(104),Pe=a(107),Me=a(14),Le=(a(63),[new Me.Icon({iconUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fb/Map_pin_icon_green.svg/800px-Map_pin_icon_green.svg.png",iconSize:[25,40]}),new Me.Icon({iconUrl:"https://www.clipartmax.com/png/full/86-869339_yellow-map-marker-png.png",iconSize:[25,40]}),new Me.Icon({iconUrl:"http://www.clker.com/cliparts/1/K/0/V/P/H/map-pin-pink.svg.hi.png",iconSize:[25,40]})]),_e=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currLoc:null,enableAddLocation:!1,newPosting:null,editing:!1},e.setCurrLoc=function(t){console.log(t),e.setState({currLoc:t})},e.addMarker=function(t,a,n){a&&(console.log("enabled"),n.latitude=t.latlng.lat,n.longitude=t.latlng.lng,e.setState({newPosting:n,editing:!0}))},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.parent,n=t.allPostings,s=t.enableAddLocation,c=this.state.newPosting;return r.a.createElement(Ae.a,{center:[43.662891,-79.395653],zoom:12,onClick:function(t){e.addMarker(t,s,n)}},r.a.createElement(Se.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),"Home"===a&&n.map((function(t){return t.postings.map((function(t){return r.a.createElement(Ie.a,{key:t._id,position:[t.latitude,t.longitude],onClick:function(){e.setCurrLoc(t)}})}))})),("ViewPosting"===a||"EditPosting"===a&&!this.state.editing)&&r.a.createElement(Ie.a,{key:n._id,position:[n.latitude,n.longitude],onClick:function(){e.setCurrLoc(n)}}),"Profile"===a&&Object.keys(n).map((function(t,a){return n[t].journeyPostings.map((function(t){return r.a.createElement(Ie.a,{key:t._id,position:[t.latitude,t.longitude],onClick:function(){e.setCurrLoc(t)},icon:Le[a%Le.length]})}))})),"JourneyPosting"===a&&n.map((function(t){return r.a.createElement(Ie.a,{key:t._id,position:[t.latitude,t.longitude],onClick:function(){e.setCurrLoc(t)}})})),this.state.newPosting&&r.a.createElement(Ie.a,{key:c._id,position:[c.latitude,c.longitude],onClick:function(){e.setCurrLoc(c)}}),this.state.currLoc&&r.a.createElement(Pe.a,{position:[this.state.currLoc.latitude,this.state.currLoc.longitude],onClose:function(){e.setCurrLoc(null)}},r.a.createElement("div",null,r.a.createElement("h2",null,this.state.currLoc.title),r.a.createElement("p",null,E(this.state.currLoc.date)))))}}]),a}(r.a.Component),De=(a(64),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={postingCardColumns:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){ke(this,"")}},{key:"searchPosting",value:function(e){console.log("page receive search",e),ke(this,e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currUser,n=t.setCurrUser;return r.a.createElement("div",{className:"page home-page"},r.a.createElement("div",{className:"main-view home-main"},this.state.postingCardColumns?r.a.createElement(Ne,{postingCardColumns:this.state.postingCardColumns,currUser:a,setCurrUser:n,setSearch:function(t){e.searchPosting(t)}}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Posting"),r.a.createElement(Ue,{currUser:a})),r.a.createElement("div",{className:"map-view home-map"},this.state.postingCardColumns?r.a.createElement(_e,{parent:"Home",allPostings:this.state.postingCardColumns}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Map")))}}]),a}(r.a.Component)),Je=(a(65),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.posting;return r.a.createElement("div",{className:"journey-list-posting"},r.a.createElement("div",{className:"journey-list-posting-text"},r.a.createElement("h3",{className:"journey-posting-date"},E(e.date)),r.a.createElement("h4",{className:"journey-posting-title"},e.title),r.a.createElement("p",{className:"journey-posting-body"},e.body)),r.a.createElement("div",{className:"journey-list-posting-image-container"},e.images.length>0&&r.a.createElement("img",{className:"journey-list-posting-image",src:e.images[0]&&e.images[0].url,alt:"journey"})))}}]),a}(r.a.Component)),Re=(a(66),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.postingList;return r.a.createElement("div",{className:"posting-list-page"},e.map((function(e,t){return r.a.createElement(h.b,{key:t,className:"journey-posting-link",to:"/trip/"+e._id.toString()},r.a.createElement(Je,{key:e._id,posting:e}))})))}}]),a}(r.a.Component)),Fe=(a(67),a(12));function Te(){return(Te=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de(a);case 3:n=e.sent,console.log("Get journey ".concat(a),n),n&&t.setState(Object(Fe.a)({},n)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Be(){return(Be=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Submit journey",a),e.next=4,fe(a.author._id,{title:a.title});case 4:(n=e.sent)?(console.log("Created journey ".concat(n._id),n),alert("Created journey ".concat(n._id),n),v()):alert("Creation Failed!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ze(){return(ze=Object(u.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(a,n),e.next=4,be(a,n);case 4:(r=e.sent)?(console.log("Updated journey ".concat(r._id),r),alert("Updated journey ".concat(r.title)),v()):alert("Edit Failed!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ge(){return(Ge=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye(a);case 3:(n=e.sent)?(console.log("Deleted journey ".concat(a),n),alert("Deleted journey ".concat(n.title)),y("/",!1)):alert("Deletion Failed!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={_id:n.props.journeyId,title:n.props.title,author:n.props.currUser},n}return Object(p.a)(a,[{key:"submitJourney",value:function(){var e={title:this.state.title,author:this.state.author};!function(e,t,a){ze.apply(this,arguments)}(this,this.state._id,e)}},{key:"deleteJourney",value:function(){window.confirm("Are you sure you want to delete this journey? Your trips will be moved to default journey.")&&function(e,t){Ge.apply(this,arguments)}(this,this.state._id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.display,n=t.toggleModal;return a?r.a.createElement("div",{className:"update-journey-modal"},r.a.createElement("h2",{className:"update-journey-instruction"},"Edit Journey"),r.a.createElement("div",{className:"update-journey-content"},r.a.createElement("form",{className:"update-journey-form"},r.a.createElement("div",{className:"update-journey-item"},r.a.createElement("span",{className:"update-journey-title"},"Title"),r.a.createElement("input",{type:"text",name:"title",placeholder:"Journey to the West",onChange:function(t){return b(e,t)},value:this.state.title})),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement("button",{type:"button",className:"update-journey-btn",onClick:n},"Cancel"),r.a.createElement("button",{type:"button",className:"update-journey-btn",onClick:function(){return e.deleteJourney()}},"Delete Journey"),r.a.createElement("button",{type:"button",className:"update-journey-btn",id:"update-journey-apply",onClick:this.submitJourney.bind(this)},"Update"))))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),Qe=(a(68),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={displayEditModal:!1},e}return Object(p.a)(a,[{key:"toggleEditModal",value:function(){this.setState({displayEditModal:!this.state.displayEditModal})}},{key:"render",value:function(){var e=this,t=this.props.currUser;return r.a.createElement("div",{className:"journey-page"},r.a.createElement("div",{className:"journey-meta"},r.a.createElement("h1",{className:"trip-type"},this.props.title),t&&this.props.author&&(String(t._id)===String(this.props.author)||String(t._id)===String(this.props.author._id))?r.a.createElement("div",null,r.a.createElement("button",{className:"edit-journey-btn",onClick:function(){return e.toggleEditModal()}},"Edit"),r.a.createElement(Ve,{display:this.state.displayEditModal,toggleModal:function(){return e.toggleEditModal()},title:this.props.title,journeyId:this.props.journeyId,currUser:t})):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"journey-list"},r.a.createElement(Re,{postingList:this.props.journeyPostings})))}}]),a}(r.a.Component)),We=(a(69),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={journeyId:n.props.match.params.jid,journeyPostings:[],title:"",author:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!function(e,t){Te.apply(this,arguments)}(this,this.state.journeyId)}},{key:"render",value:function(){var e=this.props.currUser;return r.a.createElement("div",{className:"page journey"},r.a.createElement("div",{className:"main-view journey-main-view"},this.state.journeyPostings?r.a.createElement(Qe,{journeyId:this.state.journeyId,journeyPostings:this.state.journeyPostings,title:this.state.title,author:this.state.author,currUser:e}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Journey"),r.a.createElement(Ue,{currUser:e})),r.a.createElement("div",{className:"map-view edit-posting-map"},this.state.journeyPostings?r.a.createElement(_e,{parent:"JourneyPosting",allPostings:this.state.journeyPostings}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Map")))}}]),a}(r.a.Component)),Ye=(a(70),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.posting;return r.a.createElement("div",{className:"posting-view"},r.a.createElement("div",{className:"posting-metadata-container"},r.a.createElement("h1",{className:"posting-title"},a.title),t&&String(t._id)==String(a.author._id)?r.a.createElement("div",{className:"edit-container"},r.a.createElement(h.b,{to:"/edit/".concat(a._id)},r.a.createElement("button",{className:"edit-btn"},"Edit"))):null,r.a.createElement("div",{className:"posting-info-container"},r.a.createElement("ul",{className:"posting-info"},r.a.createElement("li",{className:"info-item"},r.a.createElement(h.b,{className:"nav-item",to:"/journey/"+String(a.journey._id)},a.journey.title)),r.a.createElement("li",{className:"info-item"},E(a.date)),r.a.createElement("li",{className:"info-item"},a.destination))),r.a.createElement("div",{className:"posting-author-container"},r.a.createElement("div",{className:"posting-author-avatar"},r.a.createElement("img",{src:j(a.author.avatar),alt:a.author.name})),r.a.createElement(h.b,{to:"/profile/".concat(String(a.author._id))},r.a.createElement("div",{className:"posting-author-name"},a.author.name)))),r.a.createElement("div",{className:"posting-image-container"},r.a.createElement("div",{className:"posting-images"},a.images.map((function(e,t){return r.a.createElement("div",{key:t,className:"posting-image"},r.a.createElement("img",{src:e.url,alt:"image"}))})))),r.a.createElement("div",{className:"posting-body-container"},a.body.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e," ",r.a.createElement("br",null))}))))}}]),a}(r.a.Component)),qe=a(31);function Ke(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://127.0.0.1:5000",a=new URL("http://127.0.0.1:5000/api/posting/image"),e.prev=2,e.next=5,fetch(a,{method:"POST",mode:"cors",body:t});case 5:if(200!==(n=e.sent).status){e.next=12;break}return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 12:throw"Request upload failed";case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function He(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/api/posting/image",t);case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function $e(){return($e=Object(u.a)(o.a.mark((function e(t,a){var n,r,s,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target,r=n.files,s=r[0],console.log("Loading a image file: ",s),(c=new FormData).append("image",s,s.name),e.prev=6,e.next=9,Ke(c);case 9:(i=e.sent)?(console.log("Uploaded image",i),u=[].concat(Object(qe.a)(t.state.posting.images),[i]),t.setState((function(e){return Object(Fe.a)(Object(Fe.a)({},e),{},{posting:Object(Fe.a)(Object(Fe.a)({},e.posting),{},{images:u})})}))):console.error("Failed upload image",c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function et(){return(et=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.posting.images[a],e.prev=1,e.next=4,He({image:n});case 4:(r=e.sent)?(console.log("Deleted image",r),(s=Object(qe.a)(t.state.posting.images)).splice(a,1),t.setState((function(e){return Object(Fe.a)(Object(Fe.a)({},e),{},{posting:Object(Fe.a)(Object(Fe.a)({},e.posting),{},{images:s})})}))):console.error("Failed delete image",r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function tt(){return(tt=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state.posting,e.prev=1,void 0===a._id){e.next=10;break}return console.log("Submit edit posting ".concat(a._id),a),e.next=6,ie(a._id,a);case 6:(n=e.sent)?(alert("Updated trip!"),t.props.history.push("/trip/".concat(String(n._id)))):console.error("Update failed",n),e.next=15;break;case 10:return console.log("Submit new posting",a),e.next=13,se(a);case 13:(r=e.sent)?(alert("Created new trip!"),t.props.history.push("/trip/".concat(String(r._id)))):console.error("Creation failed",r);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function at(){return(at=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=13;break}return e.prev=1,e.next=4,ue(a);case 4:(n=e.sent)&&(console.log("DELETED Posting ".concat(a),n),alert("Deleted posting."),t.props.history.push("/profile/".concat(String(t.props.currUser._id)))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(String(e.t0));case 11:e.next=14;break;case 13:window.confirm("Are you sure you want to delete the draft?")&&t.props.history.push("/profile/".concat(String(t.props.currUser._id)));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne(a);case 3:n=e.sent,console.log("Get Posting ".concat(a),n),t.setState({new:!1,posting:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function st(){return(st=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe(a);case 3:(n=e.sent)&&(console.log("Get user's journeys ".concat(a),n),t.setState({userJourneys:n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(String(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a(71);var ct=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={pid:n.props.match.params.pid,posting:null},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){nt(this,this.state.pid)}},{key:"render",value:function(){var e=this.props.currUser;return r.a.createElement("div",{className:"page view-posting-page"},r.a.createElement("div",{className:"main-view view-posting-main"},this.state.posting?r.a.createElement(Ye,{posting:this.state.posting,currUser:e}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Posting"),r.a.createElement(Ue,{currUser:e})),r.a.createElement("div",{className:"map-view view-posting-map"},this.state.posting?r.a.createElement(_e,{parent:"ViewPosting",allPostings:this.state.posting}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Map")))}}]),a}(r.a.Component),it=(a(72),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.body,a=e.handleChange;return r.a.createElement("div",{className:"editor"},r.a.createElement("textarea",{name:"body",id:"postingBodyInput",placeholder:"Write down your trip!",onChange:a,value:t}))}}]),a}(r.a.Component)),ot=(a(73),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userJourneys:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!function(e,t){st.apply(this,arguments)}(this,this.props.currUser._id)}},{key:"handleSelect",value:function(e){console.log(e);var t=e.target,a=t.value,n=t.name;console.log(n,a)}},{key:"render",value:function(){var e=this.props,t=(e.currUser,e.posting),a=e.handleInputChange,n=e.handleImageUpload,s=e.submitPosting,c=e.deletePosting,i=e.handleDeleteImage;return r.a.createElement("div",{className:"edit-posting-view"},r.a.createElement("form",{className:"posting-form",id:"postingForm"},r.a.createElement("div",{className:"edit-metadata-container"},r.a.createElement("input",{type:"text",name:"title",className:"edit-title edit-input",id:"postingTitleInput",placeholder:"TITLE",onChange:a,value:t.title}),r.a.createElement("div",{className:"posting-info-container"},r.a.createElement("select",{name:"journey",className:"edit-meta edit-input",onChange:this.handleSelect,value:this.state.userJourneys[0]?this.state.userJourneys[0]._id:""},this.state.userJourneys.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.title)}))),r.a.createElement("input",{type:"date",name:"date",className:"edit-meta edit-input",id:"postingDateInput",onChange:a,value:E(t.date)}),r.a.createElement("input",{type:"text",name:"destination",className:"edit-meta edit-input",id:"postingDestinationInput",placeholder:"DESTINATION",onChange:a,value:t.destination}))),r.a.createElement("div",{className:"edit-image-container"},r.a.createElement("div",{className:"add-image-container"},r.a.createElement("input",{type:"file",name:"image",className:"edit-input edit-image-upload-btn",multiple:!0,onChange:n})),r.a.createElement("div",{className:"posting-images"},t.images.map((function(e,t){return r.a.createElement("div",{key:t,className:"posting-image"},r.a.createElement("button",{type:"button",className:"img-del-btn",onClick:function(){return i(t)}},"delete"),r.a.createElement("img",{src:e.url,alt:e}))})))),r.a.createElement("div",{className:"edit-body-container"},r.a.createElement(it,{body:t.body,handleChange:a})),r.a.createElement("div",{className:"edit-control-container"},t._id?r.a.createElement("button",{type:"button",className:"edit-delete-btn",onClick:c},"DELETE"):r.a.createElement("button",{type:"button",className:"edit-delete-btn",onClick:c},"CANCEL"),r.a.createElement("div",{className:"edit-public-container"},r.a.createElement("input",{type:"checkbox",name:"public",className:"edit-public-checkbox",id:"postingPublicInput",onChange:a,checked:t.public})," ",r.a.createElement("span",null,"Public")),r.a.createElement("button",{type:"button",className:"edit-post-btn",onClick:s},"POST"))))}}]),a}(r.a.Component)),ut=(a(74),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={new:!0,posting:{_id:void 0,title:"",journey:"",date:"",destination:"",latitude:-1,longitude:-1,body:"",public:!1,images:[],author:n.props.currUser}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.pid;void 0!==e&&nt(this,e)}},{key:"render",value:function(){var e=this,t=this.props.currUser;return t?!this.state.new&&t&&t._id!==this.state.posting.author._id?r.a.createElement("div",{className:"page edit-posting-page"},r.a.createElement("div",{className:"main-view edit-posting-main"},r.a.createElement("h1",null,"NO ACCESS PERMISSION"),r.a.createElement(Ue,{currUser:t})),r.a.createElement("div",{className:"map-view edit-posting-map"},r.a.createElement(_e,{parent:"EditPosting",allPostings:this.state.posting}))):r.a.createElement("div",{className:"page edit-posting-page"},r.a.createElement("div",{className:"main-view edit-posting-main"},r.a.createElement(ot,{currUser:t,posting:this.state.posting,handleInputChange:function(t){return function(e,t){var a=t.target,n=a.value,r=a.name;"public"===r?e.setState((function(e){return Object(Fe.a)(Object(Fe.a)({},e),{},{posting:Object(Fe.a)(Object(Fe.a)({},e.posting),{},{public:!e.posting.public})})})):e.setState((function(e){return Object(Fe.a)(Object(Fe.a)({},e),{},{posting:Object(Fe.a)(Object(Fe.a)({},e.posting),{},Object(g.a)({},r,n))})}))}(e,t)},submitPosting:function(){return function(e){return tt.apply(this,arguments)}(e)},deletePosting:function(){return function(e,t){return at.apply(this,arguments)}(e,e.state.posting._id||void 0)},handleImageUpload:function(t){return function(e,t){return $e.apply(this,arguments)}(e,t)},handleDeleteImage:function(t){return function(e,t){return et.apply(this,arguments)}(e,t)}}),r.a.createElement(Ue,{currUser:t})),r.a.createElement("div",{className:"map-view edit-posting-map"},r.a.createElement(_e,{parent:"EditPosting",allPostings:this.state.posting,enableAddLocation:!0}))):r.a.createElement(f.a,{to:"/"})}}]),a}(r.a.Component)),lt=(a(75),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.profileInfo;return r.a.createElement("div",{className:"profile-info-page"},r.a.createElement("div",{className:"profile-avatar-container"},r.a.createElement("img",{className:"profile-image",src:j(e.avatar),alt:"avatar"})),r.a.createElement("div",{className:"profile-text"},r.a.createElement("h1",{className:"user-nick-name"},e.name),r.a.createElement("h2",{className:"user-name"},e.username),r.a.createElement("div",{className:"user-content-body"},e.description)))}}]),a}(r.a.Component)),pt=(a(76),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.journey;return r.a.createElement("div",{className:"trip-type-component"},r.a.createElement("h3",{className:"trip-type"},r.a.createElement(h.b,{className:"trip-journey-link",to:"/journey/"+(e._id?e._id.toString():"")},e.title)),r.a.createElement(Re,{postingList:e.journeyPostings||[]}))}}]),a}(r.a.Component));a(77);function mt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/user/".concat(t));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ht(e,t){return ft.apply(this,arguments)}function ft(){return(ft=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://127.0.0.1:5000",n=new URL("http://127.0.0.1:5000"+"/api/user/".concat(String(t))),e.prev=2,e.next=5,fetch(n,{method:"PUT",mode:"cors",body:a});case 5:if(200!==(r=e.sent).status){e.next=12;break}return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 12:throw"Request upload failed";case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function gt(){return(gt=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Getting Profile for user ".concat(a)),e.next=4,mt(a);case 4:(n=e.sent)?t.setState({profileInfo:n}):alert("Cannot find user"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function bt(){return(bt=Object(u.a)(o.a.mark((function e(t,a,n){var r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in"_id"in n||(n._id=a),console.log("Action receive body",n),r=new FormData,n)r.append(s,n[s]),console.log("Form append",s,": ",r[s]);return console.log("Update file data",JSON.parse(JSON.stringify(r))),e.prev=5,e.next=8,ht(a,r);case 8:c=e.sent,console.log("Updated profile",c),c?(alert("Updated profile!"),v()):alert("Update failed!"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function vt(){return(vt=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je(a);case 3:n=e.sent,console.log("Getting user's journeys",n),n&&t.setState({journeys:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var yt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleAvatarChange=function(e){var t=e.target.files[0];n.setState({avatar:t,avatarUrl:URL.createObjectURL(t)})},n.state={name:"",avatar:null,description:"",_id:null,avatarUrl:""},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(Fe.a)({},e.profileInfo))}},{key:"submitProfile",value:function(){var e={name:this.state.name,avatar:this.state.avatar,description:this.state.description};console.log("Almost submit profile",e),function(e,t,a){bt.apply(this,arguments)}(this,this.state._id,e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.display,n=t.toggleEditProfile;return a?r.a.createElement("div",{className:"edit-profile-modal"},r.a.createElement("h2",{className:"edit-profile-instruction"},"Edit Profile"),r.a.createElement("div",{className:"edit-profile-content"},r.a.createElement("div",{className:"edit-profile-input",id:"edit-avatar-container"},r.a.createElement("div",{className:"edit-avatar-presentation"},r.a.createElement("img",{className:"profile-avatar",src:this.state.avatarUrl.length>0?this.state.avatarUrl:j(this.state.avatar),alt:"profile avatar"})),r.a.createElement("input",{type:"file",name:"image",className:"edit-input edit-avatar-upload-btn",onChange:this.handleAvatarChange})),r.a.createElement("form",{className:"edit-profile-input"},r.a.createElement("div",{className:"edit-profile-item"},r.a.createElement("span",{className:"edit-profile-title",id:"edit-name-instruction"},"Nickname"),r.a.createElement("input",{type:"text",name:"name",className:"edit-nickname edit-input",placeholder:"nick-name-form",onChange:function(t){return b(e,t)},value:this.state.name})),r.a.createElement("div",{className:"edit-profile-item"},r.a.createElement("span",{className:"edit-profile-title",id:"edit-description-instruction"},"Self Description"),r.a.createElement("textarea",{type:"text",name:"description",className:"edit-user-description edit-input",placeholder:"user-description-form",onChange:function(t){return b(e,t)},value:this.state.description})),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement("button",{type:"button",className:"edit-profile-btn",onClick:n},"Cancel"),r.a.createElement("button",{type:"button",className:"edit-profile-btn",id:"edit-profile-apply",onClick:this.submitProfile.bind(this)},"Apply"))))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),Et=(a(78),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={title:"",author:n.props.currUser},n}return Object(p.a)(a,[{key:"submitJourney",value:function(){!function(e,t){Be.apply(this,arguments)}(this,{title:this.state.title,author:this.state.author})}},{key:"render",value:function(){var e=this,t=this.props,a=t.display,n=t.toggleModal;return a?r.a.createElement("div",{className:"create-journey-modal"},r.a.createElement("h2",{className:"create-journey-instruction"},"New Journey"),r.a.createElement("div",{className:"create-journey-content"},r.a.createElement("form",{className:"create-journey-form"},r.a.createElement("div",{className:"create-journey-item"},r.a.createElement("span",{className:"create-journey-title"},"Title"),r.a.createElement("input",{type:"text",name:"title",placeholder:"Journey to the West",onChange:function(t){return b(e,t)},value:this.state.title})),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement("button",{type:"button",className:"create-journey-btn",onClick:n},"Cancel"),r.a.createElement("button",{type:"button",className:"create-journey-btn",id:"create-journey-apply",onClick:this.submitJourney.bind(this)},"Create"))))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component)),jt=(a(79),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).toggleEditProfile=function(){n.setState({editProfile:!n.state.editProfile})},n.toggleCreateJourney=function(){n.setState({createJourney:!n.state.createJourney})},n.state={editProfile:!1,createJourney:!1},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.profileInfo,n=e.journeys;return r.a.createElement("div",{className:"profile-view"},t&&String(t._id)===String(this.props.profileId)?r.a.createElement("div",{className:"edit-profile-container"},r.a.createElement("button",{className:"edit-profile",onClick:this.toggleEditProfile},"Edit Profile"),r.a.createElement(yt,{className:"edit-profile-prompt",display:this.state.editProfile,toggleEditProfile:this.toggleEditProfile,profileInfo:a})):r.a.createElement(r.a.Fragment,null),r.a.createElement(lt,{className:"profile-information",profileInfo:a}),t&&String(t._id)===String(this.props.profileId)?r.a.createElement("div",{className:"new-journey-container"},r.a.createElement("button",{className:"new-journey-btn",onClick:this.toggleCreateJourney},"New Journey"),r.a.createElement(Et,{className:"new-journey-prompt",display:this.state.createJourney,toggleModal:this.toggleCreateJourney,currUser:t})):r.a.createElement(r.a.Fragment,null),Object.keys(n).map((function(e){return r.a.createElement(pt,{key:e,journey:n[e]})})))}}]),a}(r.a.Component)),wt=(a(80),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={profileId:n.props.match.params.uid,profileInfo:{},journeys:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!function(e,t){gt.apply(this,arguments)}(this,this.props.match.params.uid),function(e,t){vt.apply(this,arguments)}(this,this.props.match.params.uid)}},{key:"componentWillReceiveProps",value:function(e){e.key!==this.props.key&&v()}},{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.setCurrUser;return r.a.createElement("div",{className:"page profile-page"},r.a.createElement("div",{className:"main-view profile-page-main"},this.state.profileInfo&&this.state.journeys?r.a.createElement(jt,{currUser:t,setCurrUser:a,profileId:this.state.profileId,profileInfo:this.state.profileInfo,journeys:this.state.journeys}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Profile")),r.a.createElement(Ue,{currUser:t}),r.a.createElement("div",{className:"map-view edit-posting-map"},this.state.profileInfo&&this.state.journeys?r.a.createElement(_e,{parent:"Profile",allPostings:this.state.journeys}):r.a.createElement("div",{className:"posting-placeholder"},"Loading Map")))}}]),a}(r.a.Component)),kt=(a(81),a(35)),Ot=a.n(kt),Nt=a(36),xt=a.n(Nt),Ct=a(37),Ut=a.n(Ct),At=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"admin-nav"},r.a.createElement(h.b,{className:"admin-nav-item",to:"/admin/home"},r.a.createElement("img",{src:xt.a,alt:""}),r.a.createElement("span",null,"Home")),r.a.createElement(h.b,{className:"admin-nav-item",to:"/admin/users"},r.a.createElement("img",{src:Ot.a,alt:""}),r.a.createElement("span",null,"Users")),r.a.createElement(h.b,{className:"admin-nav-item",to:"/admin/postings"},r.a.createElement("img",{src:Ut.a,alt:""}),"Postings"),r.a.createElement(h.b,{className:"admin-nav-item",to:"/admin/login"},"Logout")))}}]),a}(r.a.Component),St=(a(82),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.currUser;return e&&"admin"===e.role?r.a.createElement("div",{className:"page admin-home-page"},r.a.createElement(At,null),r.a.createElement("div",{className:"admin-home-main"},r.a.createElement("h1",null,"Welcome, ","".concat(e.name)))):r.a.createElement(f.a,{to:"/admin/login"})}}]),a}(r.a.Component)),It=(a(83),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).login=Object(u.a)(o.a.mark((function e(){var t,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.setCurrUser,console.log("logging in..."),a=n.state.username_input,r=n.state.password_input,!(a.length<1||r.length<1)){e.next=7;break}return alert("Please enter username and password"),e.abrupt("return");case 7:return e.next=9,Q(a,r);case 9:(s=e.sent)?(console.log("Login successfully"),t(s),n.setState({redirect:"/admin/home"})):n.setState({warning:"Invalid credential!"});case 11:case"end":return e.stop()}}),e)}))),n.state={username_input:"",password_input:"",warning:"",redirect:null},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;this.props.currUser;return this.state.redirect?r.a.createElement(f.a,{to:this.state.redirect}):r.a.createElement("div",null,r.a.createElement("div",{className:"admin-login-form"},r.a.createElement("h1",null,"Admin Login"),r.a.createElement("div",{className:"admin-login-input"},r.a.createElement("span",null,"Username"),r.a.createElement("input",{value:this.state.username_input,onChange:function(t){return b(e,t)},type:"text",name:"username_input",placeholder:"Username"})),r.a.createElement("div",{className:"admin-login-input"},r.a.createElement("span",null,"Password"),r.a.createElement("input",{value:this.state.password_input,onChange:function(t){return b(e,t)},type:"password",name:"password_input",placeholder:"Password"})),r.a.createElement("span",{className:"warn"},this.state.warning),r.a.createElement("button",{type:"submit",className:"submit",onClick:this.login},"Submit")))}}]),a}(r.a.Component)),Pt=(a(84),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={redirect:null},e}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.currUser!==this.props.currUser&&e.currUser&&e.currUser.role}},{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.setCurrUser;return r.a.createElement("div",{className:"admin-login"},r.a.createElement("div",{className:"bg-img"}),r.a.createElement(It,{currUser:t,setCurrUser:a}))}}]),a}(r.a.Component)),Mt=(a(85),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.users;return r.a.createElement("div",null,r.a.createElement("table",{className:"admin-user-table admin-table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"admin-table-headerRow"},r.a.createElement("th",{className:"admin-table-header"},"User ID"),r.a.createElement("th",{className:"admin-table-header"},"Username"),r.a.createElement("th",{className:"admin-table-header"},"Nickname"),r.a.createElement("th",{className:"admin-table-header"},"Role"),r.a.createElement("th",{className:"admin-table-header"},"Status"),r.a.createElement("th",{className:"admin-table-header"},"Last Login"),r.a.createElement("th",{className:"admin-table-header"}))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t._id,className:"admin-data-row"},r.a.createElement("td",null,t._id),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.role),r.a.createElement("td",null,t.active?"Active":"Inactive"),r.a.createElement("td",null,t.lastLogin),r.a.createElement("td",{className:"actions"},t.active?r.a.createElement("button",{onClick:function(){return e.props.changeUserActive(t)}},"Inactivate"):r.a.createElement("button",{onClick:function(){return e.props.changeUserActive(t)}},"Activate"),"admin"===t.role?r.a.createElement("button",{onClick:function(){return e.props.changeUserRole(t)}},"Set to Client"):r.a.createElement("button",{onClick:function(){return e.props.changeUserRole(t)}},"Set to Admin")))})))))}}]),a}(r.a.Component));a(86);function Lt(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/posting",t);case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Dt(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("/api/admin/user",t);case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Rt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(u.a)(o.a.mark((function e(t,a){var n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("/api/admin/user/".concat(t._id),Object(Fe.a)(Object(Fe.a)({},t),a));case 3:if(n=e.sent,r=n.response,s=n.body,200!==r.status){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Tt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I("/api/admin/posting/".concat(t));case 3:if(a=e.sent,n=a.response,r=a.body,200!==n.status){e.next=10;break}return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function zt(){return(zt=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tt(a._id);case 3:e.sent&&(alert("Deleted posting ".concat(a._id)),Gt(t,"")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Gt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(u.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,console.log("Searching postings",a),e.next=5,Lt(a);case 5:(n=e.sent)&&t.setState({postings:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert(String(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Qt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(u.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,console.log("Searching users",a),e.next=5,Dt(a);case 5:(n=e.sent)&&(console.log(n),t.setState({users:n})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),alert(String(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Yt(){return(Yt=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={active:!a.active},e.next=4,Rt(a,n);case 4:(r=e.sent)?(a.active?alert("Inactivated user ".concat(r._id)):alert("Activated user ".concat(r._id)),Qt(t,"")):console.error("Error when activate/inactive user"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function qt(){return(qt=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={role:"admin"===a.role?"client":"admin"},e.next=4,Rt(a,n);case 4:(r=e.sent)?("admin"===a.role?alert("Downgraded user ".concat(r._id)):alert("Upgraded user ".concat(r._id)),Qt(t,"")):console.error("Error when set user's role"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),alert(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Kt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:[],search:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Qt(this,{search:this.state.search})}},{key:"render",value:function(){var e=this,t=this.props.currUser;return t&&"admin"===t.role?r.a.createElement("div",{className:"page admin-user-page"},r.a.createElement(At,null),r.a.createElement("div",{className:"admin-user-main"},r.a.createElement("div",{className:"table-search"},r.a.createElement("input",{type:"text",className:"table-search-input",name:"search",placeholder:"Search by ID, Username, Name",onChange:function(t){return b(e,t)}}),r.a.createElement("button",{className:"table-search-btn",onClick:function(){return Qt(e,{search:e.state.search})}},"Search")),r.a.createElement(Mt,{users:this.state.users,changeUserActive:function(t){return function(e,t){return Yt.apply(this,arguments)}(e,t)},changeUserRole:function(t){return function(e,t){return qt.apply(this,arguments)}(e,t)}}))):r.a.createElement(f.a,{to:"/admin/login"})}}]),a}(r.a.Component),Zt=(a(87),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"checkDetailContent",value:function(e){y("/trip/".concat(String(e._id)),!0)}},{key:"render",value:function(){var e=this,t=this.props.postings;return r.a.createElement("div",null,r.a.createElement("table",{className:"admin-post-table admin-table"},r.a.createElement("thead",{className:"admin-table-headerRow"},r.a.createElement("tr",null,r.a.createElement("th",{className:"admin-table-header"},"Post ID"),r.a.createElement("th",{className:"admin-table-header"},"Author"),r.a.createElement("th",{className:"admin-table-header"},"Title"),r.a.createElement("th",{className:"admin-table-header"},"Journey"),r.a.createElement("th",{className:"admin-table-header"},"Created Time"),r.a.createElement("th",{className:"admin-table-header"}))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t._id,className:"admin-data-row"},r.a.createElement("td",null,t._id),r.a.createElement("td",null,t.author.username),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.journey.title),r.a.createElement("td",null,t.createdTime),r.a.createElement("td",{className:"actions"},r.a.createElement("button",{onClick:function(){return e.props.deletePosting(t)}},"Delete"),r.a.createElement("button",{onClick:function(){return e.checkDetailContent(t)}},"View Content")))})))))}}]),a}(r.a.Component)),Ht=(a(88),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={postings:[],search:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Gt(this,{search:this.state.search})}},{key:"render",value:function(){var e=this,t=this.props.currUser;return t&&"admin"===t.role?r.a.createElement("div",{className:"page admin-post-page"},r.a.createElement(At,null),r.a.createElement("div",{className:"admin-post-main"},r.a.createElement("div",{className:"table-search"},r.a.createElement("input",{type:"text",className:"table-search-input",name:"search",placeholder:"Search by ID, Title, Content, Author",onChange:function(t){return b(e,t)}}),r.a.createElement("button",{className:"table-search-btn",onClick:function(){return Gt(e,{search:e.state.search})}},"Search")),r.a.createElement(Zt,{postings:this.state.postings,deletePosting:function(t){return function(e,t){return zt.apply(this,arguments)}(e,t)}}))):r.a.createElement(f.a,{to:"/admin/login"})}}]),a}(r.a.Component)),Xt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.setCurrUser;return r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(De,Object.assign({currUser:t,setCurrUser:a},e))}}),r.a.createElement(f.b,{exact:!0,path:"/journey/:jid",render:function(e){return r.a.createElement(We,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/trip/:pid",render:function(e){return r.a.createElement(ct,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/new-posting",render:function(e){return r.a.createElement(ut,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/edit/:pid",render:function(e){return r.a.createElement(ut,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/profile/:uid",render:function(e){return r.a.createElement(wt,Object.assign({currUser:t,setCurrUser:a,key:e.match.params.uid},e))}}),r.a.createElement(f.b,{exact:!0,path:"/admin/login",render:function(e){return r.a.createElement(Pt,Object.assign({currUser:t,setCurrUser:a},e))}}),r.a.createElement(f.b,{exact:!0,path:"/admin/home",render:function(e){return r.a.createElement(St,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/admin/users",render:function(e){return r.a.createElement(Kt,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/admin/postings",render:function(e){return r.a.createElement(Ht,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{exact:!0,path:"/admin",render:function(e){return r.a.createElement(St,Object.assign({currUser:t},e))}}),r.a.createElement(f.b,{component:function(){return r.a.createElement("h1",null,"Not Found!")}}))}}]),a}(r.a.Component),$t=(a(89),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currUser:null},e}return Object(p.a)(a,[{key:"setResumeUser",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:t=e.sent,this.setState({currUser:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.setResumeUser()}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement(Xt,{currUser:this.state.currUser,setCurrUser:function(t){return function(e,t){console.log("Set Curr User",t),e.setState({currUser:t})}(e,t)}}))}}]),a}(r.a.Component)),ea=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($t,null)),document.getElementById("root")),ea()}]),[[39,1,2]]]);
//# sourceMappingURL=main.594f8e25.chunk.js.map